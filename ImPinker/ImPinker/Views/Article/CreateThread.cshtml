@model dynamic

@{
    ViewBag.Title = "发新贴";

    <link href="~/Content/thread.css" rel="stylesheet" />
}

<div id="container">
    <h5 class="crumb"><em>当前位置：</em><a href="/index">首页</a>&gt;<a href="../">话题列表</a>&gt;阅读话题</h5>
    @using (Html.BeginForm("CreateThread", "Article", FormMethod.Post))
    {
        <input type="text" name="ArticleName" placeholder="请输入标题" id="threadName" style="font-size: 24px; padding: 20px ; margin-bottom: 30px; width: 100%; " />
        <div class="small-topic-article" style="padding: 0">
            <script id="contain" name="Content" type="text/plain" style="width: 100%; height: 800px;">
            </script>
        </div>
        <input id="btn_publish" type="submit" value="发布" />
        <hr />
        @Html.ValidationSummary()
    }
</div>

@section scripts
{
    <script src="/UeEditer/ueditor.config.js"></script>
    <script src="/UeEditer/ueditor.all.js"></script>
    <script src="/UeEditer/ueditor.parse.js"></script>
    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="/UeEditer/lang/zh-cn/zh-cn.js"></script>


    <script type="text/javascript">
        $(document).ready(function () {
            var ue = UE.getEditor('contain');

            $("#btn_publish").bind("click", function () {
                var flag = ue.hasContents();
                if (flag) {
                    var content = ue.getContent();
                    var articleName = $("#threadName").val();
                    return true;
                    $.ajax({
                        url: "/Article/CreateThread",
                        type: "post",
                        data: { name: articleName, content: content },
                        success: function (data) {
                            alert("bingo！");
                        },
                        error: function (data) {
                            alert(data);
                        }
                    });
                }

            });
        });

    </script>




}

